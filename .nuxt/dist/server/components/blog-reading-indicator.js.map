{"version":3,"file":"components/blog-reading-indicator.js","sources":["webpack:///./src/components/Blog/ReadingIndicator.vue","webpack:///./src/components/Blog/ReadingIndicator.vue?b6b0","webpack:///./src/components/Blog/ReadingIndicator.vue?e858","webpack:///./src/components/Blog/ReadingIndicator.vue?803a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isElementVisible),expression:\"isElementVisible\"}],staticClass:\"flex\"},[_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ content: _vm.getPercentLeftBottom === 100 ? '100% <3' : `${_vm.getPercentLeftBottom}% left ^^` }),expression:\"{ content: getPercentLeftBottom === 100 ? '100% <3' : `${getPercentLeftBottom}% left ^^` }\"}]},[_c('div',{staticClass:\"rounded-md bg-gray-200 h-100 w-1 hidden relative lg:block dark:bg-neutral-800\"},[_c('div',{staticClass:\"rounded-md inset-x-0 transition top-0 absolute left-0 right-0\",class:{ 'bg-green-500': _vm.getPercentLeftBottom === 100, 'bg-gray-300 dark:bg-neutral-600': _vm.getPercentLeftBottom < 100, },style:({ height: `${_vm.getPercentLeftBottom}%` })})])]),_vm._v(\" \"),_c('div',{staticClass:\"xl:block hidden\"},[_c('ul',{staticClass:\"flex flex-wrap gap-2 items-center grid\"},_vm._l((_vm.toc || []),function(link){return _c('li',{key:link.id,staticClass:\"text-sm transition-colors text-dark-400 dark:text-white/50 hover:text-dark-700 dark:hover:text-white/80\",style:(`padding-left: ${ ( link.depth - 1 ) * 1.5 }rem`),attrs:{\"id\":`toc-${link.id}`}},[(link.id)?_c('a',{attrs:{\"href\":`#${ link.id }`}},[_vm._v(\"\\n            \"+_vm._s(link.text)+\"\\n          \")]):_vm._e()])}),0)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\nimport { Toc } from \"@/types/Post\"\r\nimport Vue, { PropType } from \"vue\"\r\n\r\nexport default Vue.extend({\r\n\r\n  props: {\r\n\r\n    toc: {\r\n      type: Array as PropType<Toc[]>,\r\n      required: true,\r\n      default: () => [],\r\n    },\r\n\r\n    selector: {\r\n      type: String,\r\n      required: true,\r\n      default: null\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      el: null as Element | null,\r\n      scrollY: 0,\r\n      rect: {\r\n        top: 0,\r\n        bottom: 0,\r\n      },\r\n      window: {\r\n        height: 0,\r\n        width: 0,\r\n      },\r\n    }\r\n  },\r\n\r\n  computed: {\r\n\r\n\r\n\r\n\r\n    // —— Calculates the position of the element and returns percentage value.\r\n    getPercentLeftBottom(): number {\r\n      const { top, bottom } = this.rect\r\n      const percent = ~~( ( ( top - this.window.height ) / ( top - bottom ) ) * 100 )\r\n\r\n      return percent > 100 ? 100 : percent\r\n    },\r\n\r\n    // —— Checks if the position is higher than a specific number and returns a boolean value.\r\n    isElementVisible(): boolean {\r\n      return this.scrollY > 175\r\n    },\r\n\r\n  },\r\n\r\n  mounted( ) {\r\n\r\n    const observer = new IntersectionObserver( ( entries ) => {\r\n      entries.forEach( ( entry ) => {\r\n        // —— If the element in table of contents is visible, add a class to it\r\n        if ( entry.isIntersecting ) {\r\n          const id = entry.target.getAttribute( \"id\" )\r\n          const tocElement = document.querySelector( `#toc-${ id }` );\r\n          [ \"!font-bold\", \"!text-dark-700\", \"!dark:text-white\" ].forEach( ( className ) => tocElement?.classList.add( className ) )\r\n        } else {\r\n          // —— If the element in table of contents is not visible, remove a class from it\r\n          const id = entry.target.getAttribute( \"id\" )\r\n          const tocElement = document.querySelector( `#toc-${ id }` );\r\n          [ \"!font-bold\", \"!text-dark-700\", \"!dark:text-white\" ].forEach( ( className ) => tocElement?.classList.remove( className ) )\r\n        }\r\n      } )\r\n    }, {\r\n      rootMargin: \"0px 0px 0px 0px\",\r\n      threshold: 0,\r\n    } )\r\n\r\n    document.querySelectorAll( \"h2 , h3 , h4 , h5 , h6\" ).forEach( ( heading ) => {\r\n      observer.observe( heading )\r\n    } )\r\n\r\n\r\n\r\n\r\n\r\n    // —— Find element in the document and set if exists\r\n    const element = document.querySelector( this.selector )\r\n\r\n    if ( !element )\r\n      return;\r\n\r\n    this.el = element\r\n\r\n    // —— Set window dimensions\r\n    const { innerHeight, innerWidth } = window\r\n    this.window = { height: innerHeight, width: innerWidth }\r\n\r\n    // —— Add scroll event to update positions\r\n    window.addEventListener( \"scroll\", this.handleScroll )\r\n  },\r\n\r\n  beforeDestroy() {\r\n    // —— Remove scroll event before changing the page\r\n    window.removeEventListener( \"scroll\", this.handleScroll )\r\n  },\r\n\r\n  methods: {\r\n    handleScroll() {\r\n      // —— Set scroll position\r\n      this.scrollY = window.scrollY\r\n\r\n      // —— Set window height and width\r\n      const { innerHeight, innerWidth } = window\r\n      this.window = { height: innerHeight, width: innerWidth }\r\n\r\n      // —— Get element's position\r\n      const { top, bottom } = this.el?.getBoundingClientRect() || {}\r\n\r\n      // —— Save element's position to Vue data\r\n      if ( !top || !bottom )\r\n        return\r\n\r\n      this.rect = { top, bottom }\r\n\r\n    },\r\n  },\r\n})\r\n\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/windicss-webpack-plugin/dist/loaders/windicss-template.cjs!./ReadingIndicator.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/windicss-webpack-plugin/dist/loaders/windicss-template.cjs!./ReadingIndicator.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ReadingIndicator.vue?vue&type=template&id=c1e9c972&\"\nimport script from \"./ReadingIndicator.vue?vue&type=script&lang=ts&\"\nexport * from \"./ReadingIndicator.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"2bb6ce31\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;ACCA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAMA;AACA;AAEA;AAGA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAGA;AAAA;AAAA;AAAA;AAEA;;AAEA;;AC/HA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}